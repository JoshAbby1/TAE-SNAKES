<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Classic Snake Game</title>
<style>
  body {
    margin: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    height: 100vh;
    background: #222;
    color: #fff;
    font-family: sans-serif;
    text-align: center;
  }
  h1 {
    margin: 20px 0 10px;
  }
  p, #author {
    margin: 0 0 10px;
  }
  canvas {
    background: #000;
    display: block;
    margin-top: 10px;
  }
  #score {
    margin: 10px;
    font-size: 24px;
  }
  .controls {
    display: grid;
    grid-template-columns: 60px 60px 60px;
    grid-template-rows: 60px 60px;
    gap: 10px;
    margin-top: 10px;
  }
  .controls button {
    font-size: 20px;
    padding: 10px;
    cursor: pointer;
    background: #555;
    color: #fff;
    border: none;
    border-radius: 5px;
  }
</style>
</head>
<body>
<h1>Snake Game</h1>
<p>Use arrow keys or buttons to move. Eat the red food and grow!</p>
<p id="author">Made by @nortydigitalcrew</p>
<div id="score">Score: 0</div>
<canvas id="gameCanvas"></canvas>

<div class="controls">
  <div></div><button id="upBtn">↑</button><div></div>
  <button id="leftBtn">←</button><div></div><button id="rightBtn">→</button>
  <div></div><button id="downBtn">↓</button><div></div>
</div>

<button id="restartBtn">Restart</button>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

const cellSize = 20;
let rows, cols;
let snake;
let food;
let direction;
let score;
let gameInterval;

function resizeCanvas() {
  // Make canvas fit screen in 4:5 ratio
  const maxWidth = window.innerWidth * 0.9;
  const maxHeight = window.innerHeight * 0.6;
  let width = maxWidth;
  let height = width * 5 / 4;
  if (height > maxHeight) {
    height = maxHeight;
    width = height * 4 / 5;
  }
  canvas.width = Math.floor(width / cellSize) * cellSize;
  canvas.height = Math.floor(height / cellSize) * cellSize;
  cols = canvas.width / cellSize;
  rows = canvas.height / cellSize;
}

function init() {
  resizeCanvas();
  snake = [{x: Math.floor(cols/2), y: Math.floor(rows/2)}];
  direction = 'RIGHT';
  placeFood();
  score = 0;
  document.getElementById('score').innerText = 'Score: 0';

  clearInterval(gameInterval);
  gameInterval = setInterval(gameLoop, 100);
}

function placeFood() {
  let x, y;
  do {
    x = Math.floor(Math.random() * cols);
    y = Math.floor(Math.random() * rows);
  } while (snake.some(segment => segment.x === x && segment.y === y));
  food = {x, y};
}

function gameLoop() {
  const head = {...snake[0]};

  if (direction === 'UP') head.y--;
  else if (direction === 'DOWN') head.y++;
  else if (direction === 'LEFT') head.x--;
  else if (direction === 'RIGHT') head.x++;

  if (head.x < 0 || head.x >= cols || head.y < 0 || head.y >= rows ||
      snake.some(segment => segment.x === head.x && segment.y === head.y)) {
    clearInterval(gameInterval);
    alert('Game Over! Final Score: ' + score);
    return;
  }

  snake.unshift(head);

  if (head.x === food.x && head.y === food.y) {
    score++;
    document.getElementById('score').innerText = 'Score: ' + score;
    placeFood();
  } else {
    snake.pop();
  }

  draw();
}

function draw() {
  ctx.fillStyle = '#000';
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  ctx.fillStyle = '#0f0';
  snake.forEach(segment => ctx.fillRect(segment.x*cellSize, segment.y*cellSize, cellSize, cellSize));

  ctx.fillStyle = '#f00';
  ctx.fillRect(food.x*cellSize, food.y*cellSize, cellSize, cellSize);
}

// Keyboard controls
document.addEventListener('keydown', e => {
  if (e.key === 'ArrowUp' && direction !== 'DOWN') direction = 'UP';
  if (e.key === 'ArrowDown' && direction !== 'UP') direction = 'DOWN';
  if (e.key === 'ArrowLeft' && direction !== 'RIGHT') direction = 'LEFT';
  if (e.key === 'ArrowRight' && direction !== 'LEFT') direction = 'RIGHT';
});

// Button controls
document.getElementById('upBtn').addEventListener('click', () => { if(direction!=='DOWN') direction='UP'; });
document.getElementById('downBtn').addEventListener('click', () => { if(direction!=='UP') direction='DOWN'; });
document.getElementById('leftBtn').addEventListener('click', () => { if(direction!=='RIGHT') direction='LEFT'; });
document.getElementById('rightBtn').addEventListener('click', () => { if(direction!=='LEFT') direction='RIGHT'; });

// Restart button
document.getElementById('restartBtn').addEventListener('click', init);

// Start game
init();

// Resize canvas if window changes
window.addEventListener('resize', () => {
  resizeCanvas();
  draw();
});
</script>
</body>
</html>